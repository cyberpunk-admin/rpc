## RPC framework

RPC(Remote Procedure Call，远程过程调用)是一种计算机通信协议，
允许调用不同进程空间的程序。RPC 的客户端和服务器可以在一台机器上，
也可以在不同的机器上。程序员使用时，就像调用本地程序一样，无需关注内部的实现细节。

## RPC 框架需要解决什么问题
RPC 框架需要解决什么问题？或者我们换一个问题，为什么需要 RPC 框架？

我们可以想象下两台机器上，两个应用程序之间需要通信，那么首先，
需要确定采用的传输协议是什么？如果这个两个应用程序位于不同的机器，
那么一般会选择 TCP 协议或者 HTTP 协议；那如果两个应用程序位于相同的机器，
也可以选择 Unix Socket 协议。传输协议确定之后，还需要确定报文的编码格式，
比如采用最常用的 JSON 或者 XML，那如果报文比较大，还可能会选择 protobuf 
等其他的编码方式，甚至编码之后，再进行压缩。接收端获取报文则需要相反的过程，先解压再解码。
解决了传输协议和报文编码的问题，接下来还需要解决一系列的可用性问题，
例如，连接超时了怎么办？是否支持异步请求和并发？
如果服务端的实例很多，客户端并不关心这些实例的地址和部署位置，
只关心自己能否获取到期待的结果，那就引出了注册中心(registry)和负载均衡(load balance)的问题。简单地说，即客户端和服务端互相不感知对方的存在，服务端启动时将自己注册到注册中心，客户端调用时，从注册中心获取到所有可用的实例，选择一个来调用。这样服务端和客户端只需要感知注册中心的存在就够了。注册中心通常还需要实现服务动态添加、删除，使用心跳确保服务处于可用状态等功能。

再进一步，假设服务端是不同的团队提供的，如果没有统一的 RPC 
框架，各个团队的服务提供方就需要各自实现一套消息编解码、连接池、收发线程、超时处理等“业务之外”的重复技术劳动，造成整体的低效。因此，“业务之外”的这部分公共的能力，即是 RPC 框架所需要具备的能力。